!function(a){"use strict";var n,s,e,t,o,i,c=a("#cs-dashboard-tabs-wrapper > a"),r=a("#cs-dashboard-form > .cs-dashboard-form-page"),l=a("#tab-demo.cs-dashboard-form-page"),d=a("input[name=cozystay_theme_settings_active_tab]"),u=a("#tab-info.cs-dashboard-form-page .opening-hours-form tbody"),m=a("#toplevel_page_cs-theme .wp-submenu > li").not(".wp-submenu-head"),f=a(".cs-submit-button"),p=(a("body"),a(".cs-custom-fonts-wrapper")),h=a(".cs-adobe-typekit-id"),v=a(".cs-sync-adobe-fonts");function b(){e.before(t({index:e.data("current-index"),list:o}))}c.length&&r.length&&c.on("click",function(t){t.preventDefault();var e=a(this),n=e.attr("href"),t=c.index(e);return!e.hasClass("nav-tab-active")&&n&&r.filter(n).length&&(m.removeClass("current").eq(t).addClass("current"),["#tab-support","#tab-demo","#tab-tools","#tab-integrations"].includes(n)?f.hide():f.show(),c.removeClass("nav-tab-active"),e.addClass("nav-tab-active"),r.removeClass("tab-active"),r.filter(n).addClass("tab-active"),d.val(n.replace("#",""))),!1}),u.length&&u.on("click",".add",function(t){t.preventDefault();t=a(this).closest("tr").clone(!0,!0);t.find("input[type=text]").val(""),u.append(t),u.find("tr").each(function(e,t){a(t).find("input[type=text]").each(function(){var t=a(this);t.attr("name",t.attr("name").replace(/\d/,e)),t.attr("id",t.attr("id").replace(/\d/,e))})})}).on("click",".remove",function(t){t.preventDefault();t=a(this).closest("tr");t.siblings().length?t.remove():t.find("input[type=text]").val("")}),l.length&&l.on("click",".cs-demo-box .button-install-open-modal",function(t){t.preventDefault();t=a(this).closest(".cs-demo-box").children(".cs-demo-popup-wrap");return t.length&&t.css("display",""),!1}).on("click",".cs-demo-popup-wrap .cs-demo-popup-corner-close",function(t){return t.preventDefault(),a(this).closest(".cs-demo-popup-wrap").css("display","none"),!1}),h.length&&(n=h.siblings(".message"),s=cozystayThemeSettings.adobeFonts.i18nText,h.on("keyup",function(){n.html("").hide()}),v.on("click",function(t){var e;t.preventDefault(),n.html("").hide(),h.val()?(e=a(this),t=wpApiSettings.root+"loftocean/v1/sync-adobe-fonts/"+h.val(),e.text(s.sending).attr("disabled","disabled"),a.get(t).done(function(t){(t.status?n.html(t.message):n.html(s.error)).show(),e.text(s.done)}).fail(function(){n.html(s.error).show(),e.text(s.fail)}).always(function(){e.removeAttr("disabled")})):n.html(s.empty).show()}),a(".cs-clear-adobe-fonts").on("click",function(t){t.preventDefault();var e=a(this),t=wpApiSettings.root+"loftocean/v1/clear-adobe-fonts/";h.val(""),n.html("").hide(),e.attr("disabled","disabled"),a.get(t).always(function(){e.removeAttr("disabled")})})),p.length&&(e=p.find(".cs-custom-font-add"),t=wp.template("cs-custom-font"),o=[{name:"",weight:"400",woff:"",woff2:""}],i={input:"",frame:"",frames:{},mediaFrame:function(){return this.frame||(this.frame=wp.media({id:"cs-font-uploader",editing:!0,multiple:!1}).on("select",function(){var t=i.frame.state().get("selection").first().toJSON();i.el.trigger("changed.cozystay.media",t),i.el=""}).on("open",function(){i.frame.state().get("selection").reset()})),this.frame},open:function(t,e){this.el=a(t).first(),this.mediaFrame().open()}},p.on("click",".cs-custom-font-item-remove",function(t){t.preventDefault();t=a(this).closest(".cs-custom-font-item");t.siblings(".cs-custom-font-item").length||(b(),e.data("current-index",1+e.data("current-index"))),t.remove()}).on("keyup",".cs-custom-font-name",function(t){var e=a(this).closest(".cs-custom-font-item").find("h3 .item-font-name"),n=a(this).val();e.length&&(n?e.html(" - "+n):e.html(""))}).on("click",".cs-media-uploader",function(t){t.preventDefault(),i.open(a(this))}).on("changed.cozystay.media",".cs-media-uploader",function(t,e){t.preventDefault(),a(this).siblings("input").val(e.url)}).on("click",".cs-media-remove",function(t){t.preventDefault(),a(this).siblings("input").val("")}),e.on("click",function(t){t.preventDefault(),b(),e.data("current-index",1+e.data("current-index"))}),p=cozystayThemeSettings&&cozystayThemeSettings.customFonts&&Array.isArray(cozystayThemeSettings.customFonts)?cozystayThemeSettings.customFonts:o,e.before(t({index:0,list:p})),e.data("current-index",p.length))}(jQuery);
